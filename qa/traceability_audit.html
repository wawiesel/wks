<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>WKS Traceability Audit</title>
  <link href="https://fonts.googleapis.com/css2?family=Fraunces:opsz,wght@9..144,500;9..144,700&family=IBM+Plex+Sans:wght@400;500;600&family=JetBrains+Mono:wght@400;600&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg: #f6f1e8;
      --bg-2: #f0e7da;
      --panel: #ffffff;
      --ink: #1f1a17;
      --muted: #6b5f55;
      --accent: #2d6f6b;
      --accent-2: #b25c34;
      --danger: #b3402a;
      --ok: #2e6b3d;
      --warn: #8a6d1f;
      --border: #e2d6c7;
      --shadow: 0 10px 30px rgba(35, 23, 15, 0.12);
      --radius: 14px;
    }

    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: "IBM Plex Sans", "Avenir Next", "Gill Sans", sans-serif;
      color: var(--ink);
      background: radial-gradient(1200px 600px at 10% 0%, #ffffff 0%, var(--bg) 40%, var(--bg-2) 100%);
    }

    .wrap {
      max-width: 1200px;
      margin: 0 auto;
      padding: 36px 20px 64px;
      position: relative;
    }

    .hero {
      background: var(--panel);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: 28px 32px;
      box-shadow: var(--shadow);
      overflow: hidden;
      position: relative;
      animation: fadeUp 0.6s ease-out;
    }

    .hero::after {
      content: "";
      position: absolute;
      inset: 0;
      background: linear-gradient(120deg, rgba(45,111,107,0.08), transparent 40%),
                  linear-gradient(-140deg, rgba(178,92,52,0.10), transparent 45%);
      pointer-events: none;
    }

    h1 {
      margin: 0 0 8px;
      font-family: "Fraunces", "Iowan Old Style", serif;
      font-size: clamp(28px, 4vw, 42px);
      letter-spacing: 0.2px;
    }

    .subtitle {
      margin: 0;
      color: var(--muted);
      font-size: 15px;
    }

    .meta {
      margin-top: 14px;
      display: flex;
      gap: 18px;
      flex-wrap: wrap;
      color: var(--muted);
      font-size: 13px;
    }

    .cards {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
      gap: 16px;
      margin: 24px 0 20px;
    }

    .card {
      background: var(--panel);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 16px 18px;
      box-shadow: 0 6px 20px rgba(35, 23, 15, 0.08);
      animation: fadeUp 0.6s ease-out;
    }

    .card h3 {
      margin: 0 0 6px;
      font-size: 13px;
      font-weight: 600;
      color: var(--muted);
      text-transform: uppercase;
      letter-spacing: 0.08em;
    }

    .card .value {
      font-size: 26px;
      font-weight: 600;
    }

    .card .value small {
      font-size: 13px;
      color: var(--muted);
    }

    .toolbar {
      display: flex;
      gap: 12px;
      flex-wrap: wrap;
      align-items: center;
      padding: 14px 16px;
      background: var(--panel);
      border: 1px solid var(--border);
      border-radius: 12px;
      margin-bottom: 18px;
    }

    .toolbar input[type="search"] {
      flex: 1 1 240px;
      padding: 10px 12px;
      border-radius: 10px;
      border: 1px solid var(--border);
      font-size: 14px;
      background: #fbf8f3;
    }

    .toolbar select, .toolbar button {
      padding: 9px 12px;
      border-radius: 10px;
      border: 1px solid var(--border);
      background: #fbf8f3;
      font-size: 14px;
    }

    .toggle {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      font-size: 13px;
      color: var(--muted);
    }

    .section {
      margin-top: 26px;
    }

    .section h2 {
      font-family: "Fraunces", "Iowan Old Style", serif;
      font-size: 22px;
      margin: 0 0 12px;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      background: var(--panel);
      border: 1px solid var(--border);
      border-radius: 12px;
      overflow: hidden;
      box-shadow: 0 6px 20px rgba(35, 23, 15, 0.08);
    }

    thead {
      background: #f5eee4;
    }

    th, td {
      padding: 12px 14px;
      text-align: left;
      border-bottom: 1px solid var(--border);
      vertical-align: top;
      font-size: 13px;
    }

    th {
      font-size: 12px;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      color: var(--muted);
    }

    tbody tr:nth-child(odd) {
      background: #fcf9f4;
    }

    tbody tr:hover {
      background: #f1e8db;
    }

    .badge {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      border-radius: 999px;
      padding: 4px 10px;
      font-size: 12px;
      font-weight: 600;
      border: 1px solid transparent;
    }

    .badge.ok {
      background: rgba(46, 107, 61, 0.12);
      color: var(--ok);
      border-color: rgba(46, 107, 61, 0.2);
    }

    .badge.warn {
      background: rgba(178, 92, 52, 0.12);
      color: var(--accent-2);
      border-color: rgba(178, 92, 52, 0.2);
    }

    .chip {
      display: inline-block;
      padding: 3px 8px;
      border-radius: 8px;
      background: rgba(45,111,107,0.12);
      color: var(--accent);
      border: 1px solid rgba(45,111,107,0.2);
      font-size: 12px;
      margin-right: 6px;
      margin-bottom: 4px;
      font-family: "JetBrains Mono", "SFMono-Regular", Menlo, monospace;
    }

    .refs {
      font-family: "JetBrains Mono", "SFMono-Regular", Menlo, monospace;
      font-size: 12px;
      color: var(--muted);
      line-height: 1.4;
    }

    .muted { color: var(--muted); }

    .detail {
      margin-top: 18px;
      padding: 16px 18px;
      background: var(--panel);
      border: 1px solid var(--border);
      border-radius: 12px;
      box-shadow: 0 6px 20px rgba(35, 23, 15, 0.08);
    }

    .detail pre {
      font-family: "JetBrains Mono", "SFMono-Regular", Menlo, monospace;
      background: #f9f4ec;
      padding: 12px;
      border-radius: 10px;
      border: 1px solid var(--border);
      white-space: pre-wrap;
      font-size: 12px;
      line-height: 1.5;
    }

    .matrix {
      margin-top: 16px;
      border: 1px solid var(--border);
      border-radius: 12px;
      background: var(--panel);
      overflow: auto;
      max-height: 420px;
    }

    .matrix table {
      border: none;
      box-shadow: none;
      min-width: 600px;
    }

    .matrix th, .matrix td {
      text-align: center;
      padding: 8px 10px;
    }

    .matrix th {
      position: sticky;
      top: 0;
      background: #f5eee4;
      z-index: 2;
    }

    .matrix .row-head {
      position: sticky;
      left: 0;
      background: #f5eee4;
      z-index: 1;
      text-align: left;
      font-family: "JetBrains Mono", "SFMono-Regular", Menlo, monospace;
    }

    .dot {
      display: inline-block;
      width: 10px;
      height: 10px;
      border-radius: 50%;
      background: #d7c8b5;
    }

    .dot.on {
      background: var(--accent);
    }

    .footer {
      margin-top: 32px;
      color: var(--muted);
      font-size: 12px;
      text-align: center;
    }

    @keyframes fadeUp {
      from { opacity: 0; transform: translateY(12px); }
      to { opacity: 1; transform: translateY(0); }
    }

    @media (max-width: 720px) {
      .hero { padding: 20px; }
      .toolbar { flex-direction: column; align-items: stretch; }
      th:nth-child(3), td:nth-child(3), th:nth-child(4), td:nth-child(4) { display: none; }
    }
  </style>
</head>
<body>
  <div class="wrap">
    <section class="hero">
      <h1>WKS Traceability Audit</h1>
      <p class="subtitle">Audit-ready traceability from requirements to tests.</p>
      <div class="meta">
        <div><strong>Source</strong>: .</div>
        <div><strong>Generated</strong>: 2026-02-16 02:51:36Z</div>
      </div>
    </section>

    <section class="cards" id="summary-cards"></section>

    <section class="toolbar">
      <input id="search" type="search" placeholder="Search by ID, text, or reference" />
      <select id="status-filter">
        <option value="all">All status</option>
        <option value="linked">Linked</option>
        <option value="unlinked">Unlinked</option>
      </select>
      <label class="toggle"><input id="show-matrix" type="checkbox" /> Show matrix</label>
      <label class="toggle"><input id="show-tests" type="checkbox" checked /> Show tests table</label>
      <button id="download-json">Download JSON</button>
      <button id="download-links">Download Links CSV</button>
    </section>

    <section class="section">
      <h2>Requirements Coverage</h2>
      <div id="req-table"></div>
      <div class="detail" id="req-detail"></div>
    </section>

    <section class="section" id="tests-section">
      <h2>Test Coverage</h2>
      <div id="test-table"></div>
    </section>

    <section class="section" id="matrix-section" style="display:none;">
      <h2>Traceability Matrix</h2>
      <div class="matrix" id="matrix"></div>
    </section>

    <div class="footer">Audit view generated from requirement items and test docstrings.</div>
  </div>

  <script id="data" type="application/json">{"generated_at": "2026-02-16 02:51:36Z", "source_root": ".", "summary": {"requirements_total": 13, "tests_total": 112, "links_total": 23, "requirements_linked": 8, "requirements_unlinked": 5, "tests_linked": 10, "tests_unlinked": 102, "coverage_pct": 61.5}, "requirements": [{"id": "MON-001", "text": "Monitor implementation adheres to the monitor specification.\nMonitor tests achieve 100% coverage, and the domain contains no dead code.", "links": [], "path": "qa/reqs/mon/MON-001.yml", "tests": ["unit.test_wks_api_monitor_MonitorConfig", "unit.test_wks_api_monitor_cmd_check", "unit.test_wks_api_monitor_cmd_filter_add", "unit.test_wks_api_monitor_cmd_filter_remove", "unit.test_wks_api_monitor_cmd_filter_show", "unit.test_wks_api_monitor_cmd_priority_add", "unit.test_wks_api_monitor_cmd_priority_remove", "unit.test_wks_api_monitor_cmd_priority_show", "unit.test_wks_api_monitor_cmd_status", "unit.test_wks_api_monitor_cmd_sync"], "status": "linked"}, {"id": "MON-002", "text": "All monitor config fields are required; no defaults in code.", "links": [], "path": "qa/reqs/mon/MON-002.yml", "tests": ["unit.test_wks_api_monitor_MonitorConfig"], "status": "linked"}, {"id": "MON-003", "text": "wksc monitor status reports status and validation using MonitorStatusOutput.", "links": [], "path": "qa/reqs/mon/MON-003.yml", "tests": ["unit.test_wks_api_monitor_cmd_status"], "status": "linked"}, {"id": "MON-004", "text": "wksc monitor check <path> requires a path and returns MonitorCheckOutput.", "links": [], "path": "qa/reqs/mon/MON-004.yml", "tests": ["unit.test_wks_api_monitor_cmd_check"], "status": "linked"}, {"id": "MON-005", "text": "wksc monitor sync <path> requires a path; --recursive optional; returns MonitorSyncOutput.", "links": [], "path": "qa/reqs/mon/MON-005.yml", "tests": ["unit.test_wks_api_monitor_cmd_sync"], "status": "linked"}, {"id": "MON-006", "text": "Filter commands must use their respective outputs: show/add/remove.", "links": [], "path": "qa/reqs/mon/MON-006.yml", "tests": ["unit.test_wks_api_monitor_cmd_filter_add", "unit.test_wks_api_monitor_cmd_filter_remove", "unit.test_wks_api_monitor_cmd_filter_show"], "status": "linked"}, {"id": "MON-007", "text": "Priority commands must use their respective outputs: show/add/remove.", "links": [], "path": "qa/reqs/mon/MON-007.yml", "tests": ["unit.test_wks_api_monitor_cmd_priority_add", "unit.test_wks_api_monitor_cmd_priority_remove", "unit.test_wks_api_monitor_cmd_priority_show"], "status": "linked"}, {"id": "MON-008", "text": "Schema validation is required; unknown or invalid inputs yield schema-conformant errors;\nno partial success.", "links": [], "path": "qa/reqs/mon/MON-008.yml", "tests": ["unit.test_wks_api_monitor_cmd_check", "unit.test_wks_api_monitor_cmd_status", "unit.test_wks_api_monitor_cmd_sync"], "status": "linked"}, {"id": "WKS-DIFF-001", "text": "The system SHALL support pluggable diff engines including 'binary' (bsdiff4), 'text' (myers), and 'code' (AST-based).", "links": [], "path": "qa/reqs/diff/WKS-DIFF-001.yml", "tests": [], "status": "unlinked"}, {"id": "WKS-DIFF-002", "text": "The diff operation SHALL return a strongly-typed result object containing status, delta, and metadata (e.g., checksums, encoding, file type, engine used).", "links": [], "path": "qa/reqs/diff/WKS-DIFF-002.yml", "tests": [], "status": "unlinked"}, {"id": "WKS-DIFF-003", "text": "The system SHALL explicitly validate all inputs and configuration, failing loudly with specific errors for missing or invalid data, in adherence to the NoHedging rule.", "links": [], "path": "qa/reqs/diff/WKS-DIFF-003.yml", "tests": [], "status": "unlinked"}, {"id": "WKS-DIFF-004", "text": "The diff layer SHALL support diffing of transformed content via checksums provided by the Transform Layer.", "links": [], "path": "qa/reqs/diff/WKS-DIFF-004.yml", "tests": [], "status": "unlinked"}, {"id": "WKS-DIFF-005", "text": "The diff layer SHALL support diffing of indices (e.g., Code AST, Document Embeddings) to identify semantic or structural changes.", "links": [], "path": "qa/reqs/diff/WKS-DIFF-005.yml", "tests": [], "status": "unlinked"}], "tests": [{"id": "unit.test_wks_api_StageResult", "text": "Unit tests for wks.api.StageResult module.", "links": [], "path": "tests/unit/test_wks_api_StageResult.py", "refs": [], "reqs": [], "status": "unlinked"}, {"id": "unit.test_wks_api_URI", "text": "Tests for URI value object.", "links": [], "path": "tests/unit/test_wks_api_URI.py", "refs": [], "reqs": [], "status": "unlinked"}, {"id": "unit.test_wks_api_cat_CatConfig", "text": "Unit tests for wks.api.cat.CatConfig module.", "links": [], "path": "tests/unit/test_wks_api_cat_CatConfig.py", "refs": [], "reqs": [], "status": "unlinked"}, {"id": "unit.test_wks_api_cat_cmd", "text": "Tests for wks/api/cat/cmd.py.", "links": [], "path": "tests/unit/test_wks_api_cat_cmd.py", "refs": [], "reqs": [], "status": "unlinked"}, {"id": "unit.test_wks_api_config_WKSConfig", "text": "Unit tests for wks.api.config.WKSConfig module.\n\nRequirements Satisfied:\n\n- CONFIG.1\n- CONFIG.2\n- CONFIG.6", "links": [], "path": "tests/unit/test_wks_api_config_WKSConfig.py", "refs": [], "reqs": [], "status": "unlinked"}, {"id": "unit.test_wks_api_config_cmd_list", "text": "Config list command tests.\n\nRequirements Satisfied:\n\n- CONFIG.1\n- CONFIG.3\n- CONFIG.6", "links": [], "path": "tests/unit/test_wks_api_config_cmd_list.py", "refs": [], "reqs": [], "status": "unlinked"}, {"id": "unit.test_wks_api_config_cmd_show", "text": "Unit tests for config cmd_show.\n\nRequirements Satisfied:\n\n- CONFIG.4\n- CONFIG.6", "links": [], "path": "tests/unit/test_wks_api_config_cmd_show.py", "refs": [], "reqs": [], "status": "unlinked"}, {"id": "unit.test_wks_api_config_cmd_version", "text": "Unit tests for wks.api.config.cmd_version module.\n\nRequirements Satisfied:\n\n- CONFIG.5", "links": [], "path": "tests/unit/test_wks_api_config_cmd_version.py", "refs": [], "reqs": [], "status": "unlinked"}, {"id": "unit.test_wks_api_config_load_config_with_output", "text": "Unit tests for wks.api.config.load_config_with_output.load_config_with_output.", "links": [], "path": "tests/unit/test_wks_api_config_load_config_with_output.py", "refs": [], "reqs": [], "status": "unlinked"}, {"id": "unit.test_wks_api_config_save", "text": "Config save behavior.\n\nRequirements Satisfied:\n\n- CONFIG.1\n- CONFIG.2", "links": [], "path": "tests/unit/test_wks_api_config_save.py", "refs": [], "reqs": [], "status": "unlinked"}, {"id": "unit.test_wks_api_config_validation", "text": "Tests for WKSConfig validation rules, specifically cache-monitor consistency.", "links": [], "path": "tests/unit/test_wks_api_config_validation.py", "refs": [], "reqs": [], "status": "unlinked"}, {"id": "unit.test_wks_api_config_write_status_file", "text": "Tests in tests/unit/test_wks_api_config_write_status_file.py", "links": [], "path": "tests/unit/test_wks_api_config_write_status_file.py", "refs": [], "reqs": [], "status": "unlinked"}, {"id": "unit.test_wks_api_daemon_Daemon", "text": "Daemon filesystem event integration test (TDD scaffold).", "links": [], "path": "tests/unit/test_wks_api_daemon_Daemon.py", "refs": [], "reqs": [], "status": "unlinked"}, {"id": "unit.test_wks_api_daemon_DaemonConfig", "text": "Unit tests for wks.api.daemon.DaemonConfig module.", "links": [], "path": "tests/unit/test_wks_api_daemon_DaemonConfig.py", "refs": [], "reqs": [], "status": "unlinked"}, {"id": "unit.test_wks_api_daemon_cmd_clear", "text": "Unit tests for wks.api.daemon.cmd_clear.", "links": [], "path": "tests/unit/test_wks_api_daemon_cmd_clear.py", "refs": [], "reqs": [], "status": "unlinked"}, {"id": "unit.test_wks_api_daemon_cmd_start", "text": "Integration tests for background daemon loop via cmd_start.", "links": [], "path": "tests/unit/test_wks_api_daemon_cmd_start.py", "refs": [], "reqs": [], "status": "unlinked"}, {"id": "unit.test_wks_api_daemon_cmd_status", "text": "Integration-ish tests for wks.api.daemon.cmd_status without mocks.", "links": [], "path": "tests/unit/test_wks_api_daemon_cmd_status.py", "refs": [], "reqs": [], "status": "unlinked"}, {"id": "unit.test_wks_api_daemon_cmd_stop", "text": "Integration-ish tests for wks.api.daemon.cmd_stop without mocks.", "links": [], "path": "tests/unit/test_wks_api_daemon_cmd_stop.py", "refs": [], "reqs": [], "status": "unlinked"}, {"id": "unit.test_wks_api_database_Database", "text": "Database public API coverage with mongomock backend (no mocks).", "links": [], "path": "tests/unit/test_wks_api_database_Database.py", "refs": [], "reqs": [], "status": "unlinked"}, {"id": "unit.test_wks_api_database_DatabaseConfig", "text": "Unit tests for wks.api.database.DatabaseConfig module.", "links": [], "path": "tests/unit/test_wks_api_database_DatabaseConfig.py", "refs": [], "reqs": [], "status": "unlinked"}, {"id": "unit.test_wks_api_database_cmd_list", "text": "Tests in tests/unit/test_wks_api_database_cmd_list.py", "links": [], "path": "tests/unit/test_wks_api_database_cmd_list.py", "refs": [], "reqs": [], "status": "unlinked"}, {"id": "unit.test_wks_api_database_cmd_prune", "text": "Unit tests for wks.api.database.cmd_prune with dynamic dispatch.", "links": [], "path": "tests/unit/test_wks_api_database_cmd_prune.py", "refs": [], "reqs": [], "status": "unlinked"}, {"id": "unit.test_wks_api_database_cmd_reset", "text": "Unit tests for database cmd_reset.", "links": [], "path": "tests/unit/test_wks_api_database_cmd_reset.py", "refs": [], "reqs": [], "status": "unlinked"}, {"id": "unit.test_wks_api_database_cmd_show", "text": "Unit tests for database cmd_show.", "links": [], "path": "tests/unit/test_wks_api_database_cmd_show.py", "refs": [], "reqs": [], "status": "unlinked"}, {"id": "unit.test_wks_api_diff_Bsdiff3Engine", "text": "Unit tests for wks.api.diff.Bsdiff3Engine module.", "links": [], "path": "tests/unit/test_wks_api_diff_Bsdiff3Engine.py", "refs": [], "reqs": [], "status": "unlinked"}, {"id": "unit.test_wks_api_diff_DiffConfig", "text": "Unit tests for wks.api.diff.DiffConfig module.", "links": [], "path": "tests/unit/test_wks_api_diff_DiffConfig.py", "refs": [], "reqs": [], "status": "unlinked"}, {"id": "unit.test_wks_api_diff_MyersEngine", "text": "Unit tests for wks.api.diff.MyersEngine module.\n\nRequirements:\n- WKS-DIFF-001\n- WKS-DIFF-003", "links": [], "path": "tests/unit/test_wks_api_diff_MyersEngine.py", "refs": [], "reqs": [], "status": "unlinked"}, {"id": "unit.test_wks_api_diff_SexpDiffer", "text": "Unit tests for wks.api.diff.SexpDiffer module.\n\nRequirements:\n- WKS-DIFF-001\n- WKS-DIFF-003\n- WKS-DIFF-005", "links": [], "path": "tests/unit/test_wks_api_diff_SexpDiffer.py", "refs": [], "reqs": [], "status": "unlinked"}, {"id": "unit.test_wks_api_diff_auto_engine", "text": "Unit tests for wks.api.diff._auto_engine module.", "links": [], "path": "tests/unit/test_wks_api_diff_auto_engine.py", "refs": [], "reqs": [], "status": "unlinked"}, {"id": "unit.test_wks_api_diff_cmd_diff", "text": "Unit tests for wks.api.diff.cmd_diff module.\n\nRequirements:\n- WKS-DIFF-001\n- WKS-DIFF-002\n- WKS-DIFF-003", "links": [], "path": "tests/unit/test_wks_api_diff_cmd_diff.py", "refs": [], "reqs": [], "status": "unlinked"}, {"id": "unit.test_wks_api_diff_controller", "text": "Unit tests for wks.api.diff.controller module.\n\nRequirements:\n- WKS-DIFF-001\n- WKS-DIFF-003\n- WKS-DIFF-004", "links": [], "path": "tests/unit/test_wks_api_diff_controller.py", "refs": [], "reqs": [], "status": "unlinked"}, {"id": "unit.test_wks_api_diff_engines", "text": "Tests for diff engine registry.", "links": [], "path": "tests/unit/test_wks_api_diff_engines.py", "refs": [], "reqs": [], "status": "unlinked"}, {"id": "unit.test_wks_api_link_cmd_check", "text": "Tests in tests/unit/test_wks_api_link_cmd_check.py", "links": [], "path": "tests/unit/test_wks_api_link_cmd_check.py", "refs": [], "reqs": [], "status": "unlinked"}, {"id": "unit.test_wks_api_link_cmd_show", "text": "Tests in tests/unit/test_wks_api_link_cmd_show.py", "links": [], "path": "tests/unit/test_wks_api_link_cmd_show.py", "refs": [], "reqs": [], "status": "unlinked"}, {"id": "unit.test_wks_api_link_cmd_status", "text": "Unit tests for wks.api.link.cmd_status.", "links": [], "path": "tests/unit/test_wks_api_link_cmd_status.py", "refs": [], "reqs": [], "status": "unlinked"}, {"id": "unit.test_wks_api_link_cmd_sync", "text": "Tests in tests/unit/test_wks_api_link_cmd_sync.py", "links": [], "path": "tests/unit/test_wks_api_link_cmd_sync.py", "refs": [], "reqs": [], "status": "unlinked"}, {"id": "unit.test_wks_api_link_prune", "text": "Tests in tests/unit/test_wks_api_link_prune.py", "links": [], "path": "tests/unit/test_wks_api_link_prune.py", "refs": [], "reqs": [], "status": "unlinked"}, {"id": "unit.test_wks_api_log_LogConfig", "text": "Unit tests for wks.api.log.LogConfig module.", "links": [], "path": "tests/unit/test_wks_api_log_LogConfig.py", "refs": [], "reqs": [], "status": "unlinked"}, {"id": "unit.test_wks_api_log_append_log", "text": "Tests in tests/unit/test_wks_api_log_append_log.py", "links": [], "path": "tests/unit/test_wks_api_log_append_log.py", "refs": [], "reqs": [], "status": "unlinked"}, {"id": "unit.test_wks_api_log_cmd_prune", "text": "Tests in tests/unit/test_wks_api_log_cmd_prune.py", "links": [], "path": "tests/unit/test_wks_api_log_cmd_prune.py", "refs": [], "reqs": [], "status": "unlinked"}, {"id": "unit.test_wks_api_log_cmd_status", "text": "Tests in tests/unit/test_wks_api_log_cmd_status.py", "links": [], "path": "tests/unit/test_wks_api_log_cmd_status.py", "refs": [], "reqs": [], "status": "unlinked"}, {"id": "unit.test_wks_api_log_read_log_entries", "text": "Tests in tests/unit/test_wks_api_log_read_log_entries.py", "links": [], "path": "tests/unit/test_wks_api_log_read_log_entries.py", "refs": [], "reqs": [], "status": "unlinked"}, {"id": "unit.test_wks_api_mcp_InstallResult", "text": "Unit tests for wks.api.mcp.InstallResult.", "links": [], "path": "tests/unit/test_wks_api_mcp_InstallResult.py", "refs": [], "reqs": [], "status": "unlinked"}, {"id": "unit.test_wks_api_mcp_McpConfig", "text": "Unit tests for wks.api.mcp.McpConfig module.", "links": [], "path": "tests/unit/test_wks_api_mcp_McpConfig.py", "refs": [], "reqs": [], "status": "unlinked"}, {"id": "unit.test_wks_api_mcp_cmd_install", "text": "Unit tests for wks.api.mcp.cmd_install module.", "links": [], "path": "tests/unit/test_wks_api_mcp_cmd_install.py", "refs": [], "reqs": [], "status": "unlinked"}, {"id": "unit.test_wks_api_mcp_cmd_list", "text": "Unit tests for wks.api.mcp.cmd_list module.", "links": [], "path": "tests/unit/test_wks_api_mcp_cmd_list.py", "refs": [], "reqs": [], "status": "unlinked"}, {"id": "unit.test_wks_api_mcp_cmd_uninstall", "text": "Unit tests for wks.api.mcp.cmd_uninstall module.", "links": [], "path": "tests/unit/test_wks_api_mcp_cmd_uninstall.py", "refs": [], "reqs": [], "status": "unlinked"}, {"id": "unit.test_wks_api_monitor_MonitorConfig", "text": "Unit tests for wks.api.monitor.MonitorConfig module.", "links": ["MON-001", "MON-002"], "path": "tests/unit/test_wks_api_monitor_MonitorConfig.py", "refs": ["tests/unit/test_wks_api_monitor_MonitorConfig.py::test_monitor_config_from_config_dict_missing", "tests/unit/test_wks_api_monitor_MonitorConfig.py::test_monitor_config_from_config_dict_invalid"], "reqs": ["MON-001", "MON-002"], "status": "linked"}, {"id": "unit.test_wks_api_monitor_calculate_priority", "text": "Unit tests for calculate_priority function.", "links": [], "path": "tests/unit/test_wks_api_monitor_calculate_priority.py", "refs": [], "reqs": [], "status": "unlinked"}, {"id": "unit.test_wks_api_monitor_cmd_check", "text": "Unit tests for monitor cmd_check (no mocks, real mongomock via config).", "links": ["MON-001", "MON-004", "MON-008"], "path": "tests/unit/test_wks_api_monitor_cmd_check.py", "refs": ["tests/unit/test_wks_api_monitor_cmd_check.py::test_cmd_check_reports_monitored", "tests/unit/test_wks_api_monitor_cmd_check.py::test_cmd_check_path_not_exists", "tests/unit/test_wks_api_monitor_cmd_check.py::test_cmd_check_glob_exclusion"], "reqs": ["MON-001", "MON-004", "MON-008"], "status": "linked"}, {"id": "unit.test_wks_api_monitor_cmd_filter_add", "text": "Unit tests for wks.api.monitor.cmd_filter_add module.", "links": ["MON-001", "MON-006"], "path": "tests/unit/test_wks_api_monitor_cmd_filter_add.py", "refs": ["tests/unit/test_wks_api_monitor_cmd_filter_add.py::test_cmd_filter_add_saves_on_success", "tests/unit/test_wks_api_monitor_cmd_filter_add.py::test_cmd_filter_add_unknown_list_name", "tests/unit/test_wks_api_monitor_cmd_filter_add.py::test_cmd_filter_add_empty_dirname", "tests/unit/test_wks_api_monitor_cmd_filter_add.py::test_cmd_filter_add_wildcard_in_dirname", "tests/unit/test_wks_api_monitor_cmd_filter_add.py::test_cmd_filter_add_dirname_in_opposite", "tests/unit/test_wks_api_monitor_cmd_filter_add.py::test_cmd_filter_add_dirname_no_error", "tests/unit/test_wks_api_monitor_cmd_filter_add.py::test_cmd_filter_add_empty_glob", "tests/unit/test_wks_api_monitor_cmd_filter_add.py::test_cmd_filter_add_glob_validation_success", "tests/unit/test_wks_api_monitor_cmd_filter_add.py::test_cmd_filter_add_else_branch", "tests/unit/test_wks_api_monitor_cmd_filter_add.py::test_cmd_filter_add_validation_error", "tests/unit/test_wks_api_monitor_cmd_filter_add.py::test_cmd_filter_add_duplicate_dirname", "tests/unit/test_wks_api_monitor_cmd_filter_add.py::test_cmd_filter_add_duplicate_glob", "tests/unit/test_wks_api_monitor_cmd_filter_add.py::test_cmd_filter_add_internal_error"], "reqs": ["MON-001", "MON-006"], "status": "linked"}, {"id": "unit.test_wks_api_monitor_cmd_filter_remove", "text": "Unit tests for wks.api.monitor.cmd_filter_remove module.", "links": ["MON-001", "MON-006"], "path": "tests/unit/test_wks_api_monitor_cmd_filter_remove.py", "refs": ["tests/unit/test_wks_api_monitor_cmd_filter_remove.py::test_cmd_filter_remove_saves_on_success", "tests/unit/test_wks_api_monitor_cmd_filter_remove.py::test_cmd_filter_remove_not_found", "tests/unit/test_wks_api_monitor_cmd_filter_remove.py::test_cmd_filter_remove_dirname_list", "tests/unit/test_wks_api_monitor_cmd_filter_remove.py::test_cmd_filter_remove_unknown_list"], "reqs": ["MON-001", "MON-006"], "status": "linked"}, {"id": "unit.test_wks_api_monitor_cmd_filter_show", "text": "Unit tests for wks.api.monitor.cmd_filter_show module (real config).", "links": ["MON-001", "MON-006"], "path": "tests/unit/test_wks_api_monitor_cmd_filter_show.py", "refs": ["tests/unit/test_wks_api_monitor_cmd_filter_show.py::test_cmd_filter_show_lists_available_when_no_arg", "tests/unit/test_wks_api_monitor_cmd_filter_show.py::test_cmd_filter_show_returns_list", "tests/unit/test_wks_api_monitor_cmd_filter_show.py::test_cmd_filter_show_unknown_list_name"], "reqs": ["MON-001", "MON-006"], "status": "linked"}, {"id": "unit.test_wks_api_monitor_cmd_priority_add", "text": "Unit tests for wks.api.monitor.cmd_priority_add module.", "links": ["MON-001", "MON-007"], "path": "tests/unit/test_wks_api_monitor_cmd_priority_add.py", "refs": ["tests/unit/test_wks_api_monitor_cmd_priority_add.py::test_cmd_priority_add_existing_returns_flag", "tests/unit/test_wks_api_monitor_cmd_priority_add.py::test_cmd_priority_add_stores_and_saves", "tests/unit/test_wks_api_monitor_cmd_priority_add.py::test_cmd_priority_add_not_found_creates", "tests/unit/test_wks_api_monitor_cmd_priority_add.py::test_cmd_priority_add_updates"], "reqs": ["MON-001", "MON-007"], "status": "linked"}, {"id": "unit.test_wks_api_monitor_cmd_priority_remove", "text": "Unit tests for wks.api.monitor.cmd_priority_remove module.", "links": ["MON-001", "MON-007"], "path": "tests/unit/test_wks_api_monitor_cmd_priority_remove.py", "refs": ["tests/unit/test_wks_api_monitor_cmd_priority_remove.py::test_cmd_priority_remove_not_found", "tests/unit/test_wks_api_monitor_cmd_priority_remove.py::test_cmd_priority_remove_success", "tests/unit/test_wks_api_monitor_cmd_priority_remove.py::test_cmd_priority_remove_empty_list"], "reqs": ["MON-001", "MON-007"], "status": "linked"}, {"id": "unit.test_wks_api_monitor_cmd_priority_show", "text": "Unit tests for wks.api.monitor.cmd_priority_show module.", "links": ["MON-001", "MON-007"], "path": "tests/unit/test_wks_api_monitor_cmd_priority_show.py", "refs": ["tests/unit/test_wks_api_monitor_cmd_priority_show.py::test_cmd_priority_show_returns_stage_result"], "reqs": ["MON-001", "MON-007"], "status": "linked"}, {"id": "unit.test_wks_api_monitor_cmd_status", "text": "Unit tests for monitor cmd_status (no mocks, real mongomock via config).", "links": ["MON-001", "MON-003", "MON-008"], "path": "tests/unit/test_wks_api_monitor_cmd_status.py", "refs": ["tests/unit/test_wks_api_monitor_cmd_status.py::test_cmd_status_success", "tests/unit/test_wks_api_monitor_cmd_status.py::test_cmd_status_tracked_files_excludes_meta_document", "tests/unit/test_wks_api_monitor_cmd_status.py::test_cmd_status_database_error"], "reqs": ["MON-001", "MON-003", "MON-008"], "status": "linked"}, {"id": "unit.test_wks_api_monitor_cmd_sync", "text": "Tests for monitor cmd_sync API.", "links": ["MON-001", "MON-005", "MON-008"], "path": "tests/unit/test_wks_api_monitor_cmd_sync.py", "refs": ["tests/unit/test_wks_api_monitor_cmd_sync.py::test_monitor_cmd_sync_file", "tests/unit/test_wks_api_monitor_cmd_sync.py::test_monitor_cmd_sync_directory_recursive", "tests/unit/test_wks_api_monitor_cmd_sync.py::test_monitor_cmd_sync_missing_path_removes_from_db", "tests/unit/test_wks_api_monitor_cmd_sync.py::test_monitor_cmd_sync_skips_low_priority", "tests/unit/test_wks_api_monitor_cmd_sync.py::test_monitor_cmd_sync_enforces_limit", "tests/unit/test_wks_api_monitor_cmd_sync.py::test_monitor_cmd_sync_loop_exception", "tests/unit/test_wks_api_monitor_cmd_sync.py::test_monitor_cmd_sync_skips_excluded_file"], "reqs": ["MON-001", "MON-005", "MON-008"], "status": "linked"}, {"id": "unit.test_wks_api_monitor_explain_path", "text": "Unit tests for explain_path function.", "links": [], "path": "tests/unit/test_wks_api_monitor_explain_path.py", "refs": [], "reqs": [], "status": "unlinked"}, {"id": "unit.test_wks_api_monitor_find_priority_dir", "text": "Unit tests for find_priority_dir function.", "links": [], "path": "tests/unit/test_wks_api_monitor_find_priority_dir.py", "refs": [], "reqs": [], "status": "unlinked"}, {"id": "unit.test_wks_api_monitor_matches_glob", "text": "Unit tests for glob matching behavior via public monitor API.", "links": [], "path": "tests/unit/test_wks_api_monitor_matches_glob.py", "refs": [], "reqs": [], "status": "unlinked"}, {"id": "unit.test_wks_api_monitor_prune", "text": "Unit tests for wks.api.monitor.prune.", "links": [], "path": "tests/unit/test_wks_api_monitor_prune.py", "refs": [], "reqs": [], "status": "unlinked"}, {"id": "unit.test_wks_api_monitor_resolve_remote_uri", "text": "Tests for monitor.resolve_remote_uri.", "links": [], "path": "tests/unit/test_wks_api_monitor_resolve_remote_uri.py", "refs": [], "reqs": [], "status": "unlinked"}, {"id": "unit.test_wks_api_monitor_validate_value", "text": "Unit tests for _validate_value module.", "links": [], "path": "tests/unit/test_wks_api_monitor_validate_value.py", "refs": [], "reqs": [], "status": "unlinked"}, {"id": "unit.test_wks_api_schema_loader", "text": "Unit tests for wks.api.schema_loader module.", "links": [], "path": "tests/unit/test_wks_api_schema_loader.py", "refs": [], "reqs": [], "status": "unlinked"}, {"id": "unit.test_wks_api_schema_registry", "text": "Unit tests for wks.api.schema_registry module.", "links": [], "path": "tests/unit/test_wks_api_schema_registry.py", "refs": [], "reqs": [], "status": "unlinked"}, {"id": "unit.test_wks_api_service_Service", "text": "Unit tests for wks.api.service.Service.", "links": [], "path": "tests/unit/test_wks_api_service_Service.py", "refs": [], "reqs": [], "status": "unlinked"}, {"id": "unit.test_wks_api_service_ServiceConfig", "text": "Unit tests for ServiceConfig serialization behavior.", "links": [], "path": "tests/unit/test_wks_api_service_ServiceConfig.py", "refs": [], "reqs": [], "status": "unlinked"}, {"id": "unit.test_wks_api_service_cmd_install", "text": "Unit tests for wks.api.service.cmd_install module.\n\nWe prefer not to use mocks in almost every case, but there is not a good way\nto test installing a service except with mocks.", "links": [], "path": "tests/unit/test_wks_api_service_cmd_install.py", "refs": [], "reqs": [], "status": "unlinked"}, {"id": "unit.test_wks_api_service_cmd_start", "text": "Unit tests for wks.api.service.cmd_start module.\n\nWe prefer not to use mocks in almost every case, but there is not a good way\nto test starting a service except with mocks.", "links": [], "path": "tests/unit/test_wks_api_service_cmd_start.py", "refs": [], "reqs": [], "status": "unlinked"}, {"id": "unit.test_wks_api_service_cmd_status", "text": "Unit tests for wks.api.service.cmd_status module.\n\nNote: we do not use mocks for this test.", "links": [], "path": "tests/unit/test_wks_api_service_cmd_status.py", "refs": [], "reqs": [], "status": "unlinked"}, {"id": "unit.test_wks_api_service_cmd_stop", "text": "Unit tests for wks.api.service.cmd_stop module.\n\nWe prefer not to use mocks in almost every case, but there is not a good way\nto test stopping a service except with mocks.", "links": [], "path": "tests/unit/test_wks_api_service_cmd_stop.py", "refs": [], "reqs": [], "status": "unlinked"}, {"id": "unit.test_wks_api_service_cmd_uninstall", "text": "Unit tests for wks.api.service.cmd_uninstall module.\n\nWe prefer not to use mocks in almost every case, but there is not a good way\nto test uninstalling a service except with mocks.", "links": [], "path": "tests/unit/test_wks_api_service_cmd_uninstall.py", "refs": [], "reqs": [], "status": "unlinked"}, {"id": "unit.test_wks_api_service_pid_running", "text": "Unit tests for wks.api.service._pid_running.", "links": [], "path": "tests/unit/test_wks_api_service_pid_running.py", "refs": [], "reqs": [], "status": "unlinked"}, {"id": "unit.test_wks_api_service_read_daemon_file", "text": "Unit tests for wks.api.service._read_daemon_file.", "links": [], "path": "tests/unit/test_wks_api_service_read_daemon_file.py", "refs": [], "reqs": [], "status": "unlinked"}, {"id": "unit.test_wks_api_transform_TransformConfig", "text": "Unit tests for wks.api.transform.TransformConfig module.", "links": [], "path": "tests/unit/test_wks_api_transform_TransformConfig.py", "refs": [], "reqs": [], "status": "unlinked"}, {"id": "unit.test_wks_api_transform_cmd_engine", "text": "Integration tests for transform command using public APIs.", "links": [], "path": "tests/unit/test_wks_api_transform_cmd_engine.py", "refs": [], "reqs": [], "status": "unlinked"}, {"id": "unit.test_wks_api_transform_cmd_info", "text": "Unit tests for wks.api.transform.cmd_info.", "links": [], "path": "tests/unit/test_wks_api_transform_cmd_info.py", "refs": [], "reqs": [], "status": "unlinked"}, {"id": "unit.test_wks_api_transform_cmd_list", "text": "Unit tests for wks.api.transform.cmd_list.", "links": [], "path": "tests/unit/test_wks_api_transform_cmd_list.py", "refs": [], "reqs": [], "status": "unlinked"}, {"id": "unit.test_wks_api_transform_get_content", "text": "Tests for transform get_content API.", "links": [], "path": "tests/unit/test_wks_api_transform_get_content.py", "refs": [], "reqs": [], "status": "unlinked"}, {"id": "unit.test_wks_api_transform_mime", "text": "Tests in tests/unit/test_wks_api_transform_mime.py", "links": [], "path": "tests/unit/test_wks_api_transform_mime.py", "refs": [], "reqs": [], "status": "unlinked"}, {"id": "unit.test_wks_api_transform_prune", "text": "Unit tests for prune module.", "links": [], "path": "tests/unit/test_wks_api_transform_prune.py", "refs": [], "reqs": [], "status": "unlinked"}, {"id": "unit.test_wks_api_transform_treesitter", "text": "Tests for tree-sitter transform engine.", "links": [], "path": "tests/unit/test_wks_api_transform_treesitter.py", "refs": [], "reqs": [], "status": "unlinked"}, {"id": "unit.test_wks_api_validate_output", "text": "Unit tests for wks.api.validate_output.", "links": [], "path": "tests/unit/test_wks_api_validate_output.py", "refs": [], "reqs": [], "status": "unlinked"}, {"id": "unit.test_wks_api_vault_EdgeRecord", "text": "Tests for EdgeRecord.", "links": [], "path": "tests/unit/test_wks_api_vault_EdgeRecord.py", "refs": [], "reqs": [], "status": "unlinked"}, {"id": "unit.test_wks_api_vault_LinkMetadata", "text": "Tests in tests/unit/test_wks_api_vault_LinkMetadata.py", "links": [], "path": "tests/unit/test_wks_api_vault_LinkMetadata.py", "refs": [], "reqs": [], "status": "unlinked"}, {"id": "unit.test_wks_api_vault_SyncResult", "text": "Unit tests for wks.api.vault.SyncResult.", "links": [], "path": "tests/unit/test_wks_api_vault_SyncResult.py", "refs": [], "reqs": [], "status": "unlinked"}, {"id": "unit.test_wks_api_vault_Vault", "text": "Tests for Vault facade.", "links": [], "path": "tests/unit/test_wks_api_vault_Vault.py", "refs": [], "reqs": [], "status": "unlinked"}, {"id": "unit.test_wks_api_vault_VaultConfig", "text": "Tests for VaultConfig.", "links": [], "path": "tests/unit/test_wks_api_vault_VaultConfig.py", "refs": [], "reqs": [], "status": "unlinked"}, {"id": "unit.test_wks_api_vault_cmd_check", "text": "Unit tests for vault cmd_check.", "links": [], "path": "tests/unit/test_wks_api_vault_cmd_check.py", "refs": [], "reqs": [], "status": "unlinked"}, {"id": "unit.test_wks_api_vault_cmd_links", "text": "Unit tests for vault cmd_links.", "links": [], "path": "tests/unit/test_wks_api_vault_cmd_links.py", "refs": [], "reqs": [], "status": "unlinked"}, {"id": "unit.test_wks_api_vault_cmd_status", "text": "Unit tests for vault cmd_status.", "links": [], "path": "tests/unit/test_wks_api_vault_cmd_status.py", "refs": [], "reqs": [], "status": "unlinked"}, {"id": "unit.test_wks_api_vault_cmd_sync", "text": "Unit tests for vault cmd_sync.", "links": [], "path": "tests/unit/test_wks_api_vault_cmd_sync.py", "refs": [], "reqs": [], "status": "unlinked"}, {"id": "unit.test_wks_utils_has_internet", "text": "Tests for wks/utils/has_internet.py.", "links": [], "path": "tests/unit/test_wks_utils_has_internet.py", "refs": [], "reqs": [], "status": "unlinked"}, {"id": "unit.test_wks_utils_resolve_vault_path", "text": "Tests for wks.api.vault.resolve_vault_path.", "links": [], "path": "tests/unit/test_wks_utils_resolve_vault_path.py", "refs": [], "reqs": [], "status": "unlinked"}, {"id": "unit.test_wks_utils_uri_to_string", "text": "Tests for uri_to_string helper.", "links": [], "path": "tests/unit/test_wks_utils_uri_to_string.py", "refs": [], "reqs": [], "status": "unlinked"}, {"id": "integration.test_cli_daemon_smoke", "text": "Smoke test: CLI daemon workflow (start, file changes, database check, stop).\n\nUses shared config from tests/conftest.py via wks_env fixture.", "links": [], "path": "tests/integration/test_cli_daemon_smoke.py", "refs": [], "reqs": [], "status": "unlinked"}, {"id": "integration.test_daemon_monitor_integration", "text": "Integration tests for daemon-monitor sync with real MongoDB.\n\nThese tests REQUIRE `mongod` to be available. WKS will start it automatically\nwhen `database.type=\"mongo\"` and `database.data.local=true`, but the `mongod`\nbinary must exist on the system.", "links": [], "path": "tests/integration/test_daemon_monitor_integration.py", "refs": [], "reqs": [], "status": "unlinked"}, {"id": "integration.test_darwin_service_install", "text": "Integration test for macOS launchd service installation.\n\nThis test verifies that the macOS service backend can actually install, start, stop,\nand uninstall launchd user services.\n\nRequires macOS (Darwin) platform.", "links": [], "path": "tests/integration/test_darwin_service_install.py", "refs": [], "reqs": [], "status": "unlinked"}, {"id": "integration.test_display_mcp", "text": "Tests in tests/integration/test_display_mcp.py", "links": [], "path": "tests/integration/test_display_mcp.py", "refs": [], "reqs": [], "status": "unlinked"}, {"id": "integration.test_linux_service_install", "text": "Integration test for Linux systemd service installation.\n\nThis test runs in a Docker container with systemd to verify that the Linux\nservice backend can actually install, start, stop, and uninstall systemd user services.\n\nRequires Docker and a systemd-enabled container image.", "links": [], "path": "tests/integration/test_linux_service_install.py", "refs": [], "reqs": [], "status": "unlinked"}, {"id": "integration.test_mcp_client", "text": "Tests in tests/integration/test_mcp_client.py", "links": [], "path": "tests/integration/test_mcp_client.py", "refs": [], "reqs": [], "status": "unlinked"}, {"id": "integration.test_mcp_server", "text": "Integration tests for MCPServer request handling.", "links": [], "path": "tests/integration/test_mcp_server.py", "refs": [], "reqs": [], "status": "unlinked"}, {"id": "integration.test_mcp_setup", "text": "Tests in tests/integration/test_mcp_setup.py", "links": [], "path": "tests/integration/test_mcp_setup.py", "refs": [], "reqs": [], "status": "unlinked"}, {"id": "integration.test_server_tools", "text": "Helper-level tests for MCP server utilities.", "links": [], "path": "tests/integration/test_server_tools.py", "refs": [], "reqs": [], "status": "unlinked"}, {"id": "integration.test_wks_cli_link", "text": "Tests in tests/integration/test_wks_cli_link.py", "links": [], "path": "tests/integration/test_wks_cli_link.py", "refs": [], "reqs": [], "status": "unlinked"}, {"id": "integration.test_wks_priority_and_display", "text": "Tests for display context helpers.", "links": [], "path": "tests/integration/test_wks_priority_and_display.py", "refs": [], "reqs": [], "status": "unlinked"}, {"id": "smoke.test_wksc_config", "text": "Tests in tests/smoke/test_wksc_config.py", "links": [], "path": "tests/smoke/test_wksc_config.py", "refs": [], "reqs": [], "status": "unlinked"}, {"id": "smoke.test_wksc_mcp", "text": "MCP Smoke Tests.\n\nThese tests run the MCP server in a subprocess and communicate via stdio.\nThey ensure the installed MCP server works end-to-end through the JSON-RPC protocol.\nThese verify that the installed package's MCP capabilities work correctly.", "links": [], "path": "tests/smoke/test_wksc_mcp.py", "refs": [], "reqs": [], "status": "unlinked"}, {"id": "smoke.test_wksc_monitor", "text": "Tests in tests/smoke/test_wksc_monitor.py", "links": [], "path": "tests/smoke/test_wksc_monitor.py", "refs": [], "reqs": [], "status": "unlinked"}, {"id": "smoke.test_wksc_transform", "text": "Tests in tests/smoke/test_wksc_transform.py", "links": [], "path": "tests/smoke/test_wksc_transform.py", "refs": [], "reqs": [], "status": "unlinked"}, {"id": "smoke.test_wksc_vault", "text": "Tests in tests/smoke/test_wksc_vault.py", "links": [], "path": "tests/smoke/test_wksc_vault.py", "refs": [], "reqs": [], "status": "unlinked"}], "links": [{"req": "MON-001", "test": "unit.test_wks_api_monitor_MonitorConfig"}, {"req": "MON-001", "test": "unit.test_wks_api_monitor_cmd_check"}, {"req": "MON-001", "test": "unit.test_wks_api_monitor_cmd_filter_add"}, {"req": "MON-001", "test": "unit.test_wks_api_monitor_cmd_filter_remove"}, {"req": "MON-001", "test": "unit.test_wks_api_monitor_cmd_filter_show"}, {"req": "MON-001", "test": "unit.test_wks_api_monitor_cmd_priority_add"}, {"req": "MON-001", "test": "unit.test_wks_api_monitor_cmd_priority_remove"}, {"req": "MON-001", "test": "unit.test_wks_api_monitor_cmd_priority_show"}, {"req": "MON-001", "test": "unit.test_wks_api_monitor_cmd_status"}, {"req": "MON-001", "test": "unit.test_wks_api_monitor_cmd_sync"}, {"req": "MON-002", "test": "unit.test_wks_api_monitor_MonitorConfig"}, {"req": "MON-003", "test": "unit.test_wks_api_monitor_cmd_status"}, {"req": "MON-004", "test": "unit.test_wks_api_monitor_cmd_check"}, {"req": "MON-005", "test": "unit.test_wks_api_monitor_cmd_sync"}, {"req": "MON-006", "test": "unit.test_wks_api_monitor_cmd_filter_add"}, {"req": "MON-006", "test": "unit.test_wks_api_monitor_cmd_filter_remove"}, {"req": "MON-006", "test": "unit.test_wks_api_monitor_cmd_filter_show"}, {"req": "MON-007", "test": "unit.test_wks_api_monitor_cmd_priority_add"}, {"req": "MON-007", "test": "unit.test_wks_api_monitor_cmd_priority_remove"}, {"req": "MON-007", "test": "unit.test_wks_api_monitor_cmd_priority_show"}, {"req": "MON-008", "test": "unit.test_wks_api_monitor_cmd_check"}, {"req": "MON-008", "test": "unit.test_wks_api_monitor_cmd_status"}, {"req": "MON-008", "test": "unit.test_wks_api_monitor_cmd_sync"}]}</script>
  <script>
    const data = JSON.parse(document.getElementById('data').textContent);
    const searchInput = document.getElementById('search');
    const statusFilter = document.getElementById('status-filter');
    const showMatrix = document.getElementById('show-matrix');
    const showTests = document.getElementById('show-tests');
    const testsSection = document.getElementById('tests-section');
    const matrixSection = document.getElementById('matrix-section');

    const summary = data.summary;
    const summaryCards = [
      { label: 'Requirements', value: summary.requirements_total },
      { label: 'Linked Requirements', value: summary.requirements_linked },
      { label: 'Unlinked Requirements', value: summary.requirements_unlinked },
      { label: 'Tests', value: summary.tests_total },
      { label: 'Coverage', value: summary.coverage_pct + '%', sub: 'requirements linked' },
      { label: 'Total Links', value: summary.links_total },
    ];

    function renderCards() {
      const el = document.getElementById('summary-cards');
      el.innerHTML = summaryCards.map(card => `
        <div class="card">
          <h3>${card.label}</h3>
          <div class="value">${card.value}${card.sub ? ` <small>${card.sub}</small>` : ''}</div>
        </div>
      `).join('');
    }

    function filterItems(items) {
      const term = searchInput.value.trim().toLowerCase();
      const status = statusFilter.value;
      return items.filter(item => {
        const matchesStatus = status === 'all' || item.status === status;
        const related = item.tests || item.reqs || [];
        const hay = [
          item.id,
          item.text,
          (item.refs || []).join(' '),
          related.join(' '),
          (item.links || []).join(' '),
        ].join(' ').toLowerCase();
        const matchesTerm = !term || hay.includes(term);
        return matchesStatus && matchesTerm;
      });
    }

    function renderReqTable() {
      const rows = filterItems(data.requirements);
      const html = [
        '<table>',
        '<thead><tr><th>ID</th><th>Requirement</th><th>Tests</th><th>Status</th></tr></thead>',
        '<tbody>',
        ...rows.map(req => {
          const tests = req.tests.length ? req.tests.map(t => `<span class="chip">${t}</span>`).join('') : '<span class="muted">None</span>';
          const status = req.status === 'linked' ? '<span class="badge ok">Linked</span>' : '<span class="badge warn">Unlinked</span>';
          return `<tr data-req="${req.id}"><td><strong>${req.id}</strong></td><td>${req.text.split('\n')[0]}</td><td>${tests}</td><td>${status}</td></tr>`;
        }),
        '</tbody></table>'
      ].join('');
      document.getElementById('req-table').innerHTML = html;

      const detail = document.getElementById('req-detail');
      const reqMap = Object.fromEntries(data.requirements.map(r => [r.id, r]));
      const testMap = Object.fromEntries(data.tests.map(t => [t.id, t]));
      document.querySelectorAll('#req-table tbody tr').forEach(row => {
        row.addEventListener('click', () => {
          const id = row.getAttribute('data-req');
          const req = reqMap[id];
          const linked = req.tests.length
            ? req.tests.map(t => {
                const refs = (testMap[t].refs || []).map(r => `<div class="refs">${r}</div>`).join('') || '<div class="refs muted">No references</div>';
                return `<div style="margin-bottom:8px;"><span class="chip">${t}</span>${refs}</div>`;
              }).join('')
            : '<span class="muted">None</span>';
          detail.innerHTML = `
            <div style="display:flex;justify-content:space-between;align-items:center;gap:12px;flex-wrap:wrap;">
              <div><strong>${req.id}</strong></div>
              <div>${req.status === 'linked' ? '<span class="badge ok">Linked</span>' : '<span class="badge warn">Unlinked</span>'}</div>
            </div>
            <p class="muted">${req.path}</p>
            <pre>${req.text}</pre>
            <div><strong>Linked tests</strong>:</div>
            <div>${linked}</div>
          `;
        });
      });

      if (rows.length) {
        const first = document.querySelector('#req-table tbody tr');
        if (first) { first.click(); }
      } else {
        detail.innerHTML = '<div class="muted">No matching requirements.</div>';
      }
    }

    function renderTestTable() {
      const rows = filterItems(data.tests);
      const html = [
        '<table>',
        '<thead><tr><th>ID</th><th>Test</th><th>Linked Requirements</th><th>References</th><th>Status</th></tr></thead>',
        '<tbody>',
        ...rows.map(test => {
          const reqs = test.reqs.length ? test.reqs.map(r => `<span class="chip">${r}</span>`).join('') : '<span class="muted">None</span>';
          const refs = (test.refs || []).length ? test.refs.map(r => `<div class="refs">${r}</div>`).join('') : '<span class="muted">None</span>';
          const status = test.status === 'linked' ? '<span class="badge ok">Linked</span>' : '<span class="badge warn">Unlinked</span>';
          return `<tr><td><strong>${test.id}</strong></td><td>${test.text.split('\n')[0]}</td><td>${reqs}</td><td>${refs}</td><td>${status}</td></tr>`;
        }),
        '</tbody></table>'
      ].join('');
      document.getElementById('test-table').innerHTML = html;
    }

    function renderMatrix() {
      const reqs = data.requirements;
      const tests = data.tests;
      const linkSet = new Set(data.links.map(l => `${l.req}::${l.test}`));
      const head = ['<th></th>', ...tests.map(t => `<th>${t.id}</th>`)].join('');
      const body = reqs.map(r => {
        const cells = tests.map(t => {
          const on = linkSet.has(`${r.id}::${t.id}`);
          return `<td><span class="dot ${on ? 'on' : ''}"></span></td>`;
        }).join('');
        return `<tr><th class="row-head">${r.id}</th>${cells}</tr>`;
      }).join('');
      document.getElementById('matrix').innerHTML = `<table><thead><tr>${head}</tr></thead><tbody>${body}</tbody></table>`;
    }

    function wireDownloads() {
      document.getElementById('download-json').addEventListener('click', () => {
        const blob = new Blob([JSON.stringify(data, null, 2)], {type: 'application/json'});
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = 'traceability-audit.json';
        a.click();
        URL.revokeObjectURL(url);
      });

      document.getElementById('download-links').addEventListener('click', () => {
        const header = 'requirement_id,test_id\n';
        const rows = data.links.map(l => `${l.req},${l.test}`).join('\n');
        const blob = new Blob([header + rows], {type: 'text/csv'});
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = 'traceability-links.csv';
        a.click();
        URL.revokeObjectURL(url);
      });
    }

    function update() {
      renderReqTable();
      renderTestTable();
    }

    searchInput.addEventListener('input', update);
    statusFilter.addEventListener('change', update);
    showMatrix.addEventListener('change', () => {
      matrixSection.style.display = showMatrix.checked ? 'block' : 'none';
    });
    showTests.addEventListener('change', () => {
      testsSection.style.display = showTests.checked ? 'block' : 'none';
    });

    renderCards();
    renderMatrix();
    wireDownloads();
    update();
  </script>
</body>
</html>
